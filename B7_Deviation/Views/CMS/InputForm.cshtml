
@{
    ViewBag.Title = "InputForm";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<!DOCTYPE html>
<html lang="en">
<body>

    <div class="content-body">

        <div class="container-fluid">
            <div class="card">
                <div class="card-body">
                    <button class="btn btn-primary" id="new" style="width:125px">
                        New
                        <span class="btn-icon-right">
                            <i class="fa fa-paperclip"></i>
                        </span>
                    </button>
                    <button type="submit" class="btn btn-primary" id="submit" style="width:125px">
                        Submit
                        <span class="btn-icon-right">
                            <i class="fa fa-paper-plane"></i>
                        </span>
                    </button>
                    <button class="btn btn-primary" id="clearall" style="width:125px">
                        Clear All
                        <span class="btn-icon-right">
                            <i class="fa fa-trash"></i>
                        </span>
                    </button>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div class="card">
                <div class="card-body">
                    <h1 class="d-inline" style="">User Form</h1>

                    <hr />

                    <div class="form-validation">
                        <form class="form-user" action="" method="post" id="form-user" onsubmit="return falsefunction(this);">
                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="empid" class="col-form-label">
                                        Employee ID
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="empid" type="text" placeholder="Enter Employee ID" style="display:block;" name="empid" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="username" class="col-form-label">
                                        Username
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="username" type="text" placeholder="Enter Username" style="display:block;" name="username" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="password" class="col-form-label">
                                        Password
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="password" type="password" placeholder="Enter Password" style="display:block;" name="password" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="email" class="col-form-label">
                                        Email
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <rdiv class="col-lg-6">
                                    <input class="form-control" id="email" type="email" placeholder="Enter Email" style="display:block;" name="email" required />
                                </rdiv>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="empname" class="col-form-label">
                                        Name
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="empname" type="text" placeholder="Enter Name" style="display:block;" name="empname" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="jobttlname" class="col-form-label">
                                        Job
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="jobttlname" type="text" placeholder="Enter Job" style="display:block;" name="jobttlname" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="superiorid" class="col-form-label">
                                        Superior ID
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="superiorid" type="text" placeholder="Enter Superior ID" style="display:block;" name="superiorid" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="superiorname" class="col-form-label">
                                        Superior Name
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="superiorname" type="text" placeholder="Enter Superior Name" style="display:block;" name="superiorname" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="orggroupname" class="col-form-label">
                                        Department
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="orggroupname" type="text" placeholder="Enter Department" style="display:block;" name="orggroupname" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="emailsuperior" class="col-form-label">
                                        Superior Email
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <input class="form-control" id="emailsuperior" type="email" placeholder="Enter Superior Email" style="display:block;" name="emailsuperior" required />
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-lg-4 col-form-label">
                                    <label for="role" class="col-form-label">
                                        Deviation Role
                                        <span class="text-danger">*</span>
                                    </label>
                                </div>
                                <div class="col-lg-6">
                                    <select id="role" class="form-control">
                                        <option value="" class="dropdown-header" selected>Select Role</option>
                                    </select>
                                </div>
                            </div>

                        </form>
                    </div>

                </div>

            </div>

        </div>


    </div>

    <script src="~/Content/common.min.js"></script>
    <script src="~/Content/custom.min.js"></script>
    <script src="~/Content/settings.js"></script>
    <script src="~/Content/gleek.js"></script>
    <script src="~/Content/styleSwitcher.js"></script>
    <script src="~/Content/jquery.validate.min.js"></script>
    <script src="~/Content/jquery.validate-init.js"></script>
</body>
</html>

<script>
    $(document).ready(function () {

        GetRole();

        $('#new').click(function () {

        });

        $('#submit').click(function () {
            if (!$(".form-user").valid()) {
                return
            };
            SaveForm();
        });

        $('#clearall').click(function () {
            $('#empid').val(null);
            $('#username').val(null);
            $('#email').val(null);
            $('#empname').val(null);
            $('#jobttlname').val(null);
            $('#superiorid').val(null);
            $('#superiorname').val(null);
            $('#orggroupname').val(null);
            $('#emailsuperior').val(null);
            GetRole();
            Swal.fire(
                'Form Cleared!',
                'Successfuly Cleared Form!',
                'success'
            )
        });

    });

    function SaveForm() {

        var empid = $('#empid').val();
        var username = $('#username').val();
        var email = $('#email').val();
        var empname = $('#empname').val();
        var jobttlname = $('#jobttlname').val();
        var superiorid = $('#superiorid').val();
        var superiorname = $('#superiorname').val();
        var orggroupname = $('#orggroupname').val();
        var emailsuperior = $('#emailsuperior').val();
        var role = $('#role').val();

        var dto = {
            empid: empid,
            username: username,
            email: email,
            empname: empname,
            jobttlname: jobttlname,
            superiorid: superiorid,
            superiorname: superiorname,
            orggroupname: orggroupname,
            emailsuperior: emailsuperior,
            role: role
        }

        $.ajax({
            url: 'CMS_SaveForm',
            type: 'post',
            data: JSON.stringify(dto),
            dataType: 'json',
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                Swal.fire({
                    position: 'middle',
                    icon: 'success',
                    title: 'Successfully Insert User',
                    showConfirmButton: false,
                    timer: 1500
                });
                window.location.href = "/CMS/ShowUser"
            },
            error: function (ex) {
                alert(JSON.stringify(ex));
            }

        });
    }

    function GetRole() {
        $.ajax({
            url: "CMS_GetRole",
            type: "post",
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            success: function (data) {

                var trhtml = "";
                var trav = 0;
                var count = data.length;

                trhtml += '<option disabled selected class="dropdown-header">Select Role</option>';
                if (count > 0) {
                    for (trav = 0; trav < count; trav++) {
                        trhtml +=
                            '<option class="dropdown-item" value = "' + data[trav].rolename + '" > ' + data[trav].rolename;
                    }
                }

                $("#role").empty();
                $("#role").append(trhtml);
                $("#role").select();
            }, error: function (ex) {
                alert(JSON.stringify(ex));
            }
        });
    }

    function falsefunction(e) {
        alert("NOPE");
        return false;
    }

</script>

